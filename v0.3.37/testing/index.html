<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Testing · Trixi.jl</title><link href="https://trixi-framework.github.io/Trixi.jl/stable/testing/" rel="canonical"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><script data-outdated-warner="">function maybeAddWarning () {
    const head = document.getElementsByTagName('head')[0];

    // Add a noindex meta tag (unless one exists) so that search engines don't index this version of the docs.
    if (document.body.querySelector('meta[name="robots"]') === null) {
        const meta = document.createElement('meta');
        meta.name = 'robots';
        meta.content = 'noindex';

        head.appendChild(meta);
    };

    // Add a stylesheet to avoid inline styling
    const style = document.createElement('style');
    style.type = 'text/css';
    style.appendChild(document.createTextNode('.outdated-warning-overlay {  position: fixed;  top: 0;  left: 0;  right: 0;  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);  z-index: 999;  background-color: #ffaba7;  color: rgba(0, 0, 0, 0.7);  border-bottom: 3px solid #da0b00;  padding: 10px 35px;  text-align: center;  font-size: 15px; }  .outdated-warning-overlay .outdated-warning-closer {    position: absolute;    top: calc(50% - 10px);    right: 18px;    cursor: pointer;    width: 12px; }  .outdated-warning-overlay a {    color: #2e63b8; }    .outdated-warning-overlay a:hover {      color: #363636; }'));
    head.appendChild(style);

    const div = document.createElement('div');
    div.classList.add('outdated-warning-overlay');
    const closer = document.createElement('div');
    closer.classList.add('outdated-warning-closer');

    // Icon by font-awesome (license: https://fontawesome.com/license, link: https://fontawesome.com/icons/times?style=solid)
    closer.innerHTML = '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" class="svg-inline--fa fa-times fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>';
    closer.addEventListener('click', function () {
        document.body.removeChild(div);
    });
    let href = '/stable';
    if (window.documenterBaseURL) {
        href = window.documenterBaseURL + '/../stable';
    }
    div.innerHTML = 'This is an old version of the documentation. <br> <a href="' + href + '">Go to the newest version</a>.';
    div.appendChild(closer);
    document.body.appendChild(div);
};

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', maybeAddWarning);
} else {
    maybeAddWarning();
};
</script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img alt="Trixi.jl logo" src="../assets/logo.png"/></a><div class="docs-package-name"><span class="docs-autofit">Trixi.jl</span></div><form action="../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../visualization/">Visualization</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../adding_a_new_equation/">Adding a new equation</a></li><li><a class="tocitem" href="../differentiable_programming/">Differentiable programming</a></li></ul></li><li><span class="tocitem">Basic building blocks</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Meshes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../meshes/tree_mesh/">Tree mesh</a></li><li><a class="tocitem" href="../meshes/structured_mesh/">Structured mesh</a></li><li><a class="tocitem" href="../meshes/unstructured_quad_mesh/">Unstructured mesh</a></li></ul></li><li><a class="tocitem" href="../time_integration/">Time integration</a></li><li><a class="tocitem" href="../callbacks/">Callbacks</a></li></ul></li><li><span class="tocitem">Advanced topics &amp; developers</span><ul><li><a class="tocitem" href="../conventions/">Conventions</a></li><li><a class="tocitem" href="../development/">Development</a></li><li><a class="tocitem" href="../github-git/">GitHub &amp; Git</a></li><li><a class="tocitem" href="../styleguide/">Style guide</a></li><li class="is-active"><a class="tocitem" href="">Testing</a><ul class="internal"><li><a class="tocitem" href="#Testing-setup"><span>Testing setup</span></a></li><li><a class="tocitem" href="#Adding-new-tests"><span>Adding new tests</span></a></li><li><a class="tocitem" href="#Test-coverage"><span>Test coverage</span></a></li></ul></li><li><a class="tocitem" href="../performance/">Performance</a></li><li><a class="tocitem" href="../parallelization/">Parallelization</a></li></ul></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting and FAQ</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../reference-trixi/">Trixi.jl</a></li><li><a class="tocitem" href="../reference-trixi2vtk/">Trixi2Vtk.jl</a></li><li><a class="tocitem" href="../reference-trixi2img/">Trixi2Img.jl</a></li></ul></li><li><a class="tocitem" href="../authors/">Authors</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li><li><a class="tocitem" href="../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced topics &amp; developers</a></li><li class="is-active"><a href="">Testing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Testing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/trixi-framework/Trixi.jl/blob/master/docs/src/testing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="Testing"><a class="docs-heading-anchor" href="#Testing">Testing</a><a id="Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Testing" title="Permalink"></a></h1><p>During the development of Trixi, we rely on <a href="https://en.wikipedia.org/wiki/Continuous_testing">continuous testing</a> to ensure that modifications or new features do not break existing functionality or add other errors. In the main <a href="https://github.com/trixi-framework/Trixi.jl">Trixi</a> repository (and the repositories for the visualization tools <a href="https://github.com/trixi-framework/Trixi.jl">Trixi2Img</a> and <a href="https://github.com/trixi-framework/Trixi.jl">Trixi2Vtk</a>), this is facilitated by <a href="https://docs.github.com/en/free-pro-team@latest/actions">GitHub Actions</a>, which allows to run tests automatically upon certain events. When, how, and what is tested by GitHub Actions is controlled by the workflow file <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/.github/workflows/ci.yml"><code>.github/workflows/ci.yml</code></a>. In Trixi and its related repositories, tests are triggered by</p><ul><li>each <code>git push</code> to <code>main</code> and</li><li>each <code>git push</code> to any pull request.</li></ul><p>Besides checking functionality, we also analyse the <a href="#Test-coverage">Test coverage</a> to ensure that we do not miss important parts during testing.</p><div class="admonition is-info"><header class="admonition-header">Test and coverage requirements</header><div class="admonition-body"><p>Before merging a pull request (PR) to <code>main</code>, we require that</p><ul><li>the code passes all functional tests</li><li>code coverage does not decrease.</li></ul></div></div><h2 id="Testing-setup"><a class="docs-heading-anchor" href="#Testing-setup">Testing setup</a><a id="Testing-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-setup" title="Permalink"></a></h2><p>The entry point for all testing is the file <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/test/runtests.jl"><code>test/runtests.jl</code></a>, which is run by the automated tests and which can be triggered manually by executing</p><pre><code class="language-julia">julia&gt; using Pkg; Pkg.test("Trixi")</code></pre><p>in the REPL. Since there already exist many tests, we have split them up into multiple files in the <code>test</code> directory to allow for faster testing of individual parts of the code. Thus in addition to performing all tests, you can also just <code>include</code> one of the files named <code>test_xxx.jl</code> to run only a specific subset, e.g.,</p><pre><code class="language-julia">julia&gt; include(joinpath("test", "test_examples_2d.jl")) # Run all 2D tests

julia&gt; include(joinpath("test", "test_examples_2d_euler.jl")) # Run only 2D tests for the Euler equations</code></pre><p>For the automated tests with GitHub Actions, we run multiple jobs in parallel to reduce the waiting time until all tests are finished. You can see the different components that are run as jobs by looking at the <code>TRIXI_TEST</code> variable in <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/test/runtests.jl"><code>test/runtests.jl</code></a>.</p><h2 id="Adding-new-tests"><a class="docs-heading-anchor" href="#Adding-new-tests">Adding new tests</a><a id="Adding-new-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-new-tests" title="Permalink"></a></h2><p>We use Julia's built-in <a href="https://docs.julialang.org/en/v1/stdlib/Test/">unit testing capabilities</a> to configure tests. In general, newly added code must be covered by at least one test, and all new elixirs added to the <code>examples/</code> directory must be used at least once during testing. New tests should be added to the corresponding <code>test/test_xxx.jl</code> file, e.g., a test involving the 3D linear advection equation would go into <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/test/test_examples_3d_advection.jl"><code>test/test_examples_3d_advection.jl</code></a>. Please study one of the existing tests and stay consistent to the current style when creating new tests.</p><p>Since we want to test as much as possible, we have a lot of tests and frequently create new ones. Naturally, this increases the time to wait for all tests to pass with each novel feature added to Trixi. Therefore, new tests should be as short as reasonably possible, i.e., without being too insensitive to pick up changes or errors in the code.</p><div class="admonition is-info"><header class="admonition-header">Test duration</header><div class="admonition-body"><p>As a general rule, tests should last <strong>no more than 10 seconds</strong> when run with a single thread and after compilation (i.e., excluding the first run).</p></div></div><h2 id="Test-coverage"><a class="docs-heading-anchor" href="#Test-coverage">Test coverage</a><a id="Test-coverage-1"></a><a class="docs-heading-anchor-permalink" href="#Test-coverage" title="Permalink"></a></h2><p>In addition to ensuring that the code produces the expected results, the automated tests also record the <a href="https://en.wikipedia.org/wiki/Code_coverage">code coverage</a>. The resulting coverage reports, i.e., which lines of code were executed by at least one test and are thus considered "covered" by testing, are automatically uploaded to <a href="https://coveralls.io">Coveralls</a> for easy analysis. Typically, you see a number of Coveralls results at the bottom of each pull request: One for each parallel job (see <a href="#Testing-setup">Testing setup</a>), which can usually be ignored since they only cover parts of the code by definition, and a cumulative coverage result named <code>coverage/coveralls</code>. The "Details" link takes you to a detailed report on which lines of code are covered by tests, which ones are missed, and especially which <em>new</em> lines the pull requests adds to Trixi's code base that are not yet covered by testing.</p><div class="admonition is-info"><header class="admonition-header">Coverage requirements</header><div class="admonition-body"><p>In general, we require pull requests to <em>not decrease</em> the overall test coverage percentage in <code>main</code>, with a <strong>hard lower bound of 97%</strong>.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../styleguide/">« Style guide</a><a class="docs-footer-nextpage" href="../performance/">Performance »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 25 May 2021 06:42">Tuesday 25 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>