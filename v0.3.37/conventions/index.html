<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Conventions · Trixi.jl</title><link href="https://trixi-framework.github.io/Trixi.jl/stable/conventions/" rel="canonical"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" data-theme-name="documenter-dark" data-theme-primary-dark="" href="../assets/themes/documenter-dark.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" data-theme-name="documenter-light" data-theme-primary="" href="../assets/themes/documenter-light.css" rel="stylesheet" type="text/css"/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><script data-outdated-warner="">function maybeAddWarning () {
    const head = document.getElementsByTagName('head')[0];

    // Add a noindex meta tag (unless one exists) so that search engines don't index this version of the docs.
    if (document.body.querySelector('meta[name="robots"]') === null) {
        const meta = document.createElement('meta');
        meta.name = 'robots';
        meta.content = 'noindex';

        head.appendChild(meta);
    };

    // Add a stylesheet to avoid inline styling
    const style = document.createElement('style');
    style.type = 'text/css';
    style.appendChild(document.createTextNode('.outdated-warning-overlay {  position: fixed;  top: 0;  left: 0;  right: 0;  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);  z-index: 999;  background-color: #ffaba7;  color: rgba(0, 0, 0, 0.7);  border-bottom: 3px solid #da0b00;  padding: 10px 35px;  text-align: center;  font-size: 15px; }  .outdated-warning-overlay .outdated-warning-closer {    position: absolute;    top: calc(50% - 10px);    right: 18px;    cursor: pointer;    width: 12px; }  .outdated-warning-overlay a {    color: #2e63b8; }    .outdated-warning-overlay a:hover {      color: #363636; }'));
    head.appendChild(style);

    const div = document.createElement('div');
    div.classList.add('outdated-warning-overlay');
    const closer = document.createElement('div');
    closer.classList.add('outdated-warning-closer');

    // Icon by font-awesome (license: https://fontawesome.com/license, link: https://fontawesome.com/icons/times?style=solid)
    closer.innerHTML = '<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" class="svg-inline--fa fa-times fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path></svg>';
    closer.addEventListener('click', function () {
        document.body.removeChild(div);
    });
    let href = '/stable';
    if (window.documenterBaseURL) {
        href = window.documenterBaseURL + '/../stable';
    }
    div.innerHTML = 'This is an old version of the documentation. <br> <a href="' + href + '">Go to the newest version</a>.';
    div.appendChild(closer);
    document.body.appendChild(div);
};

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', maybeAddWarning);
} else {
    maybeAddWarning();
};
</script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img alt="Trixi.jl logo" src="../assets/logo.png"/></a><div class="docs-package-name"><span class="docs-autofit">Trixi.jl</span></div><form action="../search/" class="docs-search"><input class="docs-search-query" id="documenter-search-query" name="q" placeholder="Search docs" type="text"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../visualization/">Visualization</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../adding_a_new_equation/">Adding a new equation</a></li><li><a class="tocitem" href="../differentiable_programming/">Differentiable programming</a></li></ul></li><li><span class="tocitem">Basic building blocks</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Meshes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../meshes/tree_mesh/">Tree mesh</a></li><li><a class="tocitem" href="../meshes/structured_mesh/">Structured mesh</a></li><li><a class="tocitem" href="../meshes/unstructured_quad_mesh/">Unstructured mesh</a></li></ul></li><li><a class="tocitem" href="../time_integration/">Time integration</a></li><li><a class="tocitem" href="../callbacks/">Callbacks</a></li></ul></li><li><span class="tocitem">Advanced topics &amp; developers</span><ul><li class="is-active"><a class="tocitem" href="">Conventions</a><ul class="internal"><li><a class="tocitem" href="#Spatial-dimensions-and-directions"><span>Spatial dimensions and directions</span></a></li><li><a class="tocitem" href="#Cells-vs.-elements-vs.-nodes"><span>Cells vs. elements vs. nodes</span></a></li><li><a class="tocitem" href="#Variable-names"><span>Variable names</span></a></li><li><a class="tocitem" href="#Array-types-and-wrapping"><span>Array types and wrapping</span></a></li></ul></li><li><a class="tocitem" href="../development/">Development</a></li><li><a class="tocitem" href="../github-git/">GitHub &amp; Git</a></li><li><a class="tocitem" href="../styleguide/">Style guide</a></li><li><a class="tocitem" href="../testing/">Testing</a></li><li><a class="tocitem" href="../performance/">Performance</a></li><li><a class="tocitem" href="../parallelization/">Parallelization</a></li></ul></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting and FAQ</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../reference-trixi/">Trixi.jl</a></li><li><a class="tocitem" href="../reference-trixi2vtk/">Trixi2Vtk.jl</a></li><li><a class="tocitem" href="../reference-trixi2img/">Trixi2Img.jl</a></li></ul></li><li><a class="tocitem" href="../authors/">Authors</a></li><li><a class="tocitem" href="../contributing/">Contributing</a></li><li><a class="tocitem" href="../license/">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced topics &amp; developers</a></li><li class="is-active"><a href="">Conventions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="">Conventions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/trixi-framework/Trixi.jl/blob/master/docs/src/conventions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" href="#" id="documenter-settings-button" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" href="#" id="documenter-sidebar-button"></a></div></header><article class="content" id="documenter-page"><h1 id="conventions"><a class="docs-heading-anchor" href="#conventions">Conventions</a><a id="conventions-1"></a><a class="docs-heading-anchor-permalink" href="#conventions" title="Permalink"></a></h1><h2 id="Spatial-dimensions-and-directions"><a class="docs-heading-anchor" href="#Spatial-dimensions-and-directions">Spatial dimensions and directions</a><a id="Spatial-dimensions-and-directions-1"></a><a class="docs-heading-anchor-permalink" href="#Spatial-dimensions-and-directions" title="Permalink"></a></h2><p>We use the following numbering schemes on Cartesian or curved structured meshes.</p><ul><li>The <code>orientation</code>s are numbered as <code>1 =&gt; x, 2 =&gt; y, 3 =&gt; z</code>. For example, numerical fluxes such as <code>flux_central(u_ll, u_rr, orientation, equations::AbstractEquations)</code> use the <code>orientation</code> in this way.</li><li>The <code>direction</code>s are numbered as <code>1 =&gt; -x, 2 =&gt; +x, 3 =&gt; -y, 4 =&gt; +y, 5 =&gt; -z, 6 =&gt; +z</code>. For example, the <code>boundary_conditions</code> are ordered in this way when a <code>Tuple</code> of boundary conditions per direction is passed to the constructor of a <code>SemidiscretizationHyperbolic</code>.</li></ul><h2 id="Cells-vs.-elements-vs.-nodes"><a class="docs-heading-anchor" href="#Cells-vs.-elements-vs.-nodes">Cells vs. elements vs. nodes</a><a id="Cells-vs.-elements-vs.-nodes-1"></a><a class="docs-heading-anchor-permalink" href="#Cells-vs.-elements-vs.-nodes" title="Permalink"></a></h2><p>To uniquely distinguish between different components of the discretization, we use the following naming conventions:</p><ul><li>The computational domain is discretized by a <code>mesh</code>, which is made up of individual <code>cell</code>s. In general, neither the <code>mesh</code> nor the <code>cell</code>s should be aware of any solver-specific knowledge, i.e., they should not store anything that goes beyond the geometrical information and the connectivity.</li><li>The numerical <code>solver</code>s do not directly store their information inside the <code>mesh</code>, but use own data structures. Specifically, for each <code>cell</code> on which a solver wants to operate, the solver creates an <code>element</code> to store solver-specific data.</li><li>For discretization schemes such as the discontinuous Galerkin or the finite element method, inside each <code>element</code> multiple <code>nodes</code> may be defined, which hold nodal information. The nodes are again a solver-specific component, just like the elements.</li><li>We often identify <code>element</code>s, <code>node</code>s, etc. with their (local or global) integer index. Convenience iterators such as <code>eachelement</code>, <code>eachnode</code> use these indices.</li></ul><h2 id="Variable-names"><a class="docs-heading-anchor" href="#Variable-names">Variable names</a><a id="Variable-names-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-names" title="Permalink"></a></h2><ul><li>Use descriptive names (using <code>snake_case</code> for variables/functions and <code>CamelCase</code> for types)</li><li>Use a suffix <code>_</code> as in <code>name_</code> for local variables that would otherwise hide existing symbols.</li><li>Use a prefix <code>_</code> as in <code>_name</code> to indicate internal methods/data that are "fragile" in the sense that there's no guarantee that they might get changed without notice. These are also not documented with a docstring (but maybe with comments using <code>#</code>).</li></ul><h2 id="Array-types-and-wrapping"><a class="docs-heading-anchor" href="#Array-types-and-wrapping">Array types and wrapping</a><a id="Array-types-and-wrapping-1"></a><a class="docs-heading-anchor-permalink" href="#Array-types-and-wrapping" title="Permalink"></a></h2><p>To allow adaptive mesh refinement efficiently when using time integrators from <a href="https://github.com/SciML/OrdinaryDiffEq.jl">OrdinaryDiffEq</a>, Trixi allows to represent numerical solutions in two different ways. Some discussion can be found <a href="https://github.com/SciML/OrdinaryDiffEq.jl/pull/1275">online</a> and in form of comments describing <code>Trixi.wrap_array</code> and <code>Trixi.wrap_array_native</code> in the source code of Trixi. The flexibility introduced by this possible wrapping enables additional <a href="https://github.com/trixi-framework/Trixi.jl/pull/509">performance optimizations</a>. However, it comes at the cost of some additional abstractions (and needs to be used with caution, as described in the source code of Trixi). Thus, we use the following conventions to distinguish between arrays visible to the time integrator and wrapped arrays mainly used internally.</p><ul><li>Arrays visible to the time integrator have a suffix <code>_ode</code>, e.g., <code>du_ode</code>, <code>u_ode</code>.</li><li>Wrapped arrays do not have a suffix, e.g., <code>du, u</code>.</li></ul><p>Methods either accept arrays visible to the time integrator or wrapped arrays based on the following rules.</p><ul><li>When some solution is passed together with a semidiscretization <code>semi</code>, the solution must be a <code>u_ode</code> that needs to be  wrapped via <code>wrap_array(u_ode, semi)</code> (or <code>wrap_array_native(u_ode, semi)</code>) for further processing.</li><li>When some solution is passed together with the <code>mesh, equations, solver, cache, ...</code>, it is already wrapped via <code>wrap_array</code> (or <code>wrap_array_native</code>).</li><li>Exceptions of this rule are possible, e.g. for AMR, but must be documented in the code.</li><li><code>wrap_array</code> should be used as default option. <code>wrap_array_native</code> should only be used when necessary, e.g., to avoid additional overhead when interfacing with external C libraries such as HDF5, MPI, or visualization.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../callbacks/">« Callbacks</a><a class="docs-footer-nextpage" href="../development/">Development »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label></p><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div><p></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 25 May 2021 06:42">Tuesday 25 May 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></HTML>